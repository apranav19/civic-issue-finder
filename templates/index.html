<html>
<head>
  <title>Civic Issue Finder</title>
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='main.css') }}">
</head>
<body>
  <div class='container-fluid'>
    <div class='row'>
      <div class='col-sm-4 col-sm-offset-4'>
        <h4>Civic Issue Finder</h4>
        <form class="form" role="search" action='/find' method='POST'>
          <label for='labels'>Enter a comma-separated list of labels</label>
          <div class="input-group">
            {% if labels %}
              <input type="text" class="form-control" name="labels" value="{{ labels }}">
            {% else %}
              <input type="text" class="form-control" name="labels">
            {% endif %}
              <div class="input-group-btn">
                  <input type='submit' value='Submit' class='btn btn-default'>
              </div>
          </div>
          <input type='hidden' value='{{ org_name }}' name='org_name'>
          <input type='hidden' value='{{ default_labels }}' name='default_labels'>
        </form>
      </div>
    </div>
    {% if main %}
      <h4>Example response:</h4>
      <div class='row'>
        <div class="col-sm-4 col-sm-offset-4 issue">
            <div class="issue-labels">
                <div class="label" style="background-color: #fc2929">
                  <a href="https://api.github.com/repos/open-austin/austin-recycles/labels/bug" class="label-link">
                    label 1
                  </a>
                </div>
                &nbsp;
                <div class="label" style="background-color: #fef2c0">
                  <a href="https://api.github.com/repos/open-austin/austin-recycles/labels/hack" class="label-link">
                    label 2
                  </a>
                </div>
                &nbsp;
                  <br>
            </div>
                <br>
            <h4>
              <a href="https://github.com/open-austin/austin-recycles">
                Project Name
              </a>
            </h4>
            <p>Project Description</p>
            <a href="https://github.com/open-austin/austin-recycles/issues/24">
              <h4>Issue Name</h4>
            </a>
            <p>Issue description</p>
          </div>
      </div>
    {% endif %}
    {% if issues != [] %}
      <div class='row'>
        {% for issue in issues %}
          <div class='col-sm-4 col-sm-offset-4 issue'>
            <div class='issue-labels'>
              {% for label in issue.labels %}
                <div class='label' style='background-color: #{{ label.color }}'>
                  <a href="{{ label.url }}" class='label-link'>
                    {{ label.name }}
                  </a>
                </div>
                &nbsp;
                {% if loop.index % 2 == 0 %}
                  <br>
                {% endif %}
              {% endfor %}
            </div>
            {% for label in issue.labels %}
              {% if (loop.index % 2) == 0 %}
                <br>
              {% endif %}
            {% endfor %}
            <h4>
              <a href="{{ issue.project.code_url }}">
                {{ issue.project.name }}
              </a>
            </h4>
            <p>{{ issue.project.description }}</p>
            <a href="{{ issue.html_url }}">
              <h4>{{ issue.title }}</h4>
            </a>
            <p>{{ issue.body }}</p>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class='row'>
        <div class='col-sm-4 com-sm-offset-4'>
          <h3>No Issues for label.</h3>
        </div>
      </div>
    {% endif %}
  </div>
</body>
</html>